<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear Proyecto</title>
    <link rel="stylesheet" href="crear_proyecto.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
</head>
<body>
    <div class="crear_formulario">
        <h1>Crea Un Nuevo Proyecto</h1>
        <form action="guardar_proyecto.php" method="POST" class="proj_form" onsubmit="redirigir(event)">
            
            <ul>
                <label for="proj_name">Nombre del Proyecto:</label>
                <li><input type="text" name="proj_name" id="proj_name" required></li><br>
                
                <label for="proj_desc">Descripci√≥n del Proyecto:</label>
                <li><textarea id="proj_desc" name="proj_desc" rows="10" cols="50" required></textarea></li><br>

                <li class="submit_btn">
                    <button type="submit">Crear Proyecto</button> 
                </li>
            </ul>
        </form>
    </div>
    <script>
        function redirigir(event) {
            event.preventDefault(); // Evita el comportamiento predeterminado temporalmente.
            
            const form = event.target;
            const formData = new FormData(form);
            
            fetch(form.action, {
                method: form.method,
                body: formData
            })
            .then(response => {
                if (response.ok) {
                    // Si el registro fue exitoso, redirige
                    window.location.href = 'dashboard_empresas.html';
                } else {
                    alert('Hubo un error en el registro.');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('No se pudo completar el registro.');
            });
        }
    </script>
</body>
</html>